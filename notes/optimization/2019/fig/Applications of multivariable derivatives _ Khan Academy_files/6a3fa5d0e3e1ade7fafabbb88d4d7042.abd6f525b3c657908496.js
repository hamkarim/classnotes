(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6a3fa5d0e3e1ade7fafabbb88d4d7042"],{rrba:function(e,t,r){"use strict";r("ma9I");r("+2oP");r("3KgV");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=t.TOS_MODAL_ID=void 0;var c=g(r("q1tI"));var l=S(r("TSYQ"));var i=r("mR6N");var n=S(r("lTCR"));var s=S(r("wa3X"));var u=r("z8VS");var a=S(r("Pwnf"));var f=r("Uafs");var d=r("Vxy9");var o=S(r("gE8/"));var p=r("JasB");var v=r("JimW");var m=r("o1mU");var h=r("hCZ8");var b=g(r("uchz"));var y=r("ohvT");function S(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function w(){var t=O(["\n    mutation AcceptTOS {\n        acceptTos {\n            error {\n                code\n            }\n        }\n    }\n"]);w=function e(){return t};return t}function O(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function T(e,t,r){if(t)M(e.prototype,t);if(r)M(e,r);return e}function k(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return x(e)}function D(e){D=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return D(e)}function x(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)P(e,t)}function P(e,t){P=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return P(e,t)}function j(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var A=r("P7jp");var F="accept-tos-notification-modal";t.TOS_MODAL_ID=F;var L=function(e){C(a,e);function a(){var e;var o;E(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=k(this,(e=D(a)).call.apply(e,[this].concat(r)));j(x(o),"state",{showModal:true,hasAccepted:false,saveStatus:"unsaved"});j(x(o),"_isMounted",false);j(x(o),"maybeShowOldModal",function(){var e=document.querySelector("#".concat(h.MODAL_PARENT_ID));if(e&&e.style.display==="none"){e.style.display="initial"}});j(x(o),"onCloseModal",function(){if(o._isMounted){o.setState({showModal:false})}o.maybeShowOldModal()});j(x(o),"handleFormKeyDown",function(e){if(e.key==="Enter"){e.preventDefault()}});j(x(o),"handleFormKeyUp",function(e){var t=o.state,r=t.saveStatus,n=t.hasAccepted;if(e.key==="Enter"){e.preventDefault();if(!n||r==="saving"){return}o.handleSave()}});j(x(o),"handleCheckboxToggle",function(e){o.setState({hasAccepted:e})});j(x(o),"handleSave",function(e){o.setState({saveStatus:"saving"});return K().then(o.onSuccess).catch(o.onError)});j(x(o),"onSuccess",function(){if(o._isMounted){o.setState({showModal:false})}});j(x(o),"onError",function(){A.log("Could not complete acceptance.");if(o._isMounted){o.setState({saveStatus:"failed"})}});j(x(o),"renderModalContent",function(){var e=o.props.context.isChildAccount;var t=o.state,r=t.hasAccepted,n=t.saveStatus;var a=e?y.acceptTosStrings.childCheckboxLabel:y.acceptTosStrings.notChildCheckboxLabel;return c.createElement(v.View,null,c.createElement(d.LabelMedium,null,y.acceptTosStrings.modalContent),c.createElement(v.UniqueIDProvider,{mockOnFirstRender:true,scope:"accept-tos-modal-form"},function(e){var t=e.get("checkbox");return c.createElement("form",{onKeyDown:o.handleFormKeyDown,onKeyUp:o.handleFormKeyUp,className:(0,i.css)(U.formSection)},c.createElement(u.Checkbox,{id:t,required:true,error:n==="failed",checked:r,style:U.checkbox,onChange:o.handleCheckboxToggle}),c.createElement("label",{htmlFor:t,className:"accept-terms-of-service-modal-label",dangerouslySetInnerHTML:{__html:a}}))}))});j(x(o),"renderModalFooter",function(){var e=o.state,t=e.hasAccepted,r=e.saveStatus;var n=!t||r==="saving";return c.createElement(v.View,{style:U.modalFooter},r==="failed"&&c.createElement("div",{role:"alert"},c.createElement(d.LabelSmall,{style:U.saveError},y.acceptTosStrings.saveError)),c.createElement(p.Spring,null),c.createElement(s.default,{href:"/logout",kind:"tertiary"},y.acceptTosStrings.cancelButton),c.createElement(d.Body,{style:U.orString},y.acceptTosStrings.orString),c.createElement(s.default,{onClick:o.handleSave,spinner:r==="saving",disabled:n},y.acceptTosStrings.saveButton))});j(x(o),"render",function(){if(!o.state.showModal){return null}var e=(0,l.default)("notification-bar",(0,i.css)(U.banner));return c.createElement("div",{className:e,id:F},c.createElement(f.ModalLauncher,{opened:true,backdropDismissEnabled:false,onClose:o.props.closeCallback,modal:c.createElement(f.OnePaneDialog,{title:y.acceptTosStrings.modalHeader,content:o.renderModalContent(),footer:o.renderModalFooter(),style:U.modal,closeButtonVisible:false})}))});return o}T(a,[{key:"componentDidMount",value:function e(){this._isMounted=true;b.trackSingleEvent("Show Terms of Service Dialog")}},{key:"componentWillUnmount",value:function e(){this._isMounted=false;this.maybeShowOldModal()}}]);return a}(c.Component);t.default=L;var I=(0,n.default)(w());function K(){return(0,m.apolloMutate)(I).then(function(e){if(e.errors){throw new Error(e.errors)}if(e.data&&e.data.acceptTos&&e.data.acceptTos.error){throw new Error(e.data.acceptTos.error)}return e})}var U=i.StyleSheet.create({banner:{display:"none"},modal:{height:"auto"},formSection:{display:"flex",flexDirection:"row",marginTop:o.default.large},checkbox:{marginRight:o.default.xxSmall},modalFooter:{flexDirection:"row",alignItems:"center",width:"100%"},saveError:{color:a.default.red},orString:{margin:"0 ".concat(o.default.xSmall,"px 0 ").concat(o.default.xSmall,"px")}})}}]);
//# sourceMappingURL=../../sourcemaps/en/6a3fa5d0e3e1ade7fafabbb88d4d7042.abd6f525b3c657908496.js.map